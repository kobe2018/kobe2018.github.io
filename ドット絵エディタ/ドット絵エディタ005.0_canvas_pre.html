<!DOCTYPE HTML>
<html lang="ja">
<head>
<title>„Éâ„ÉÉ„ÉàÁµµ‰ΩúÊàê„Ç®„Éá„Ç£„Çø002</title>
<meta charset="utf-8" />

<link rel="stylesheet" type="text/css" href="css_text_editor_canvas_pre.css"><style></style>
<script >
"use strict";

let [esc_flag,clear_flag]=[true,false];
let x_down=0;let y_down=0;
let mouse_down_flag = false;
let sele_start_x, sele_start_y;
let sele_width, sele_height;
let dot_table=[
  ["„ÄÄ","‚ë†","‚ë°","‚ë¢","‚ë£","‚ë§","‚ë•","‚ë¶","‚ëß","‚ë®","‚ë©","‚ë™","‚ë´","‚ë¨","‚ë≠","‚ëÆ","‚ëØ","‚ë∞","‚ë±","‚ë≤","‚ë≥","„âë","„âí","„âì","„âî","„âï","„âñ","„âó","„âò","„âô","„âö","„âõ","„âú"],
  ["‚ë†","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë°","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë¢","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë£","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë§","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë•","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë¶","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ëß","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë®","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë©","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë™","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë´","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë¨","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë≠","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ëÆ","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ëØ","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
  ["‚ë∞","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª","‚óª"],
   
  
];
let str_dot_table="";

let code = "üü•";
window.addEventListener("DOMContentLoaded",function(){
    //keydown(element,element2);
    //keydown(element);
    //keyup(element);
    //function_touch_event();
    const ID_canvas01 = document.getElementById("ID_canvas01");
    const ctx        = ID_canvas01.getContext('2d');

    for(let i=0;i<dot_table.length;i++){
      str_dot_table  += dot_table[i].join("")+"\n";
    }
    document.querySelector('#ID_main01').innerText = str_dot_table;
/*
    document.querySelector('body').addEventListener('keydown', function(eve) {
      if(eve.ctrlKey){
        element.style.pointerEvents = "none";
      } 
    }, false);

    document.querySelector('body').addEventListener('keyup', function(eve) {
      //code=eve.keyCode
      //console.log(code);
      if(!eve.ctrlKey){
        element.style.pointerEvents = "auto";
      } 
    }, false);
    */
    document.querySelector('#ID_canvas01').addEventListener('mousedown', function(eve) {
      x_down = eve.offsetX;
      y_down = eve.offsetY;
      mouse_down_flag = true;
      
    //   let len      = [...ID_canvas01.value].length;//utf-8Áî®Ë°®Áèæ‚Üí1056„Å®Âá∫„Çã„ÄÇ
    //   let pos_start    = ID_canvas01.selectionStart;
    //   let pos_end      = ID_canvas01.selectionEnd;

    //   console.log("len ",len);
    //  // console.log("sentence ",sentence.value,pos_start,pos_end,code);
    //   console.log("pos_start ",pos_start,pos_end,code);


    //   let before   = sentence.value.substring(0, pos_start);//substr„ÅØ‰Ωø„Çè„Å™„ÅÑ„ÄÇ
    //   //console.log("before ",before);
    //   let insert_word =  code;//insert_word;ÊåøÂÖ•„Åó„Åü„ÅÑÊñáÂ≠óÂàó;
    //   //let after    = sentence.value.substring(pos_start+1, len);
    //   //let after    = sentence.value.substring(pos_start+1);
      
    //   //alert( sentence.value.substring(pos_start,pos_end+1));
    //   console.log("sentence.value.substring(pos_start,pos_end+1) ",sentence.value.substring(pos_start,pos_end+1));
    //   console.log("sentence.value.substring(pos_start,pos_end+1).split( /[\uD800-\uDBFF][\uDC00-\uDFFF]/g ) ",sentence.value.substring(pos_start,pos_end+2).split( /[\uD800-\uDBFF][\uDC00-\uDFFF]/g ).length);
      
      
    //   let after ="";
    //   if(sentence.value.substring(pos_start,pos_end+2).split( /[\uD800-\uDBFF][\uDC00-\uDFFF]/g ).length >=2){
    //     console.log( "„Çµ„É≠„Ç≤„Éº„Éà„Åß„Åô");
    //     after    = sentence.value.substring(pos_end+2);//„Çµ„É≠„Ç≤„Éº„Éà„Éô„Ç¢„ÅÆÂ†¥Âêà
    //   }else{
    //     after    = sentence.value.substring(pos_end+1);//ÈÄöÂ∏∏„ÅÆÂ†¥Âêà
    //   }
      // console.log("after ",after);
        
      // sentence = before + insert_word + after;
      // ID_canvas01.value = sentence;

      //console.log(len,pos,word,code);
       
    }, false);
    document.querySelector('#ID_canvas01').addEventListener('mousemove', function(eve) {
      if(mouse_down_flag){
        if (ctx) {
          //const context001 = ID_canvas01.getContext("2d");//2Ê¨°ÂÖÉÊèèÁîª
          ctx.clearRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);
          ctx.lineWidth = 3;
          ctx.strokeStyle = 'red';
          //ctx.strokeRect(x_down,y_down,eve.offsetX-x_down, eve.offsetY-y_down);//Â°ó„Çä„Å§„Å∂„Åï„Çå„ÅüÂõõËßíÂΩ¢
          ctx.lineWidth = 3;
          ctx.strokeStyle = 'blue';
          let fs =24;//fontsize
          let fx = Math.floor(x_down/fs)*fs;
          let fy = Math.floor(y_down/fs)*fs;
          //ctx.strokeRect(Math.floor(x_down/24)*24,Math.floor(y_down/24)*24,(Math.floor((eve.offsetX-x_down)/24)+1)*24, (Math.floor((eve.offsetY-y_down)/24)+1)*24);//Â°ó„Çä„Å§„Å∂„Åï„Çå„ÅüÂõõËßíÂΩ¢
          //ctx.strokeRect(Math.floor(x_down/fs)*fs,Math.floor(y_down/fs)*fs,(Math.ceil((eve.offsetX+0-x_down)/fs+0)+0)*fs, (Math.ceil((eve.offsetY-y_down)/fs))*fs);//Â°ó„Çä„Å§„Å∂„Åï„Çå„ÅüÂõõËßíÂΩ¢          
          //ctx.strokeRect(Math.floor(x_down/fs)*fs,Math.floor(y_down/fs)*fs,(Math.ceil((eve.offsetX+0-Math.floor(x_down/fs)*fs)/fs+0)+0)*fs, (Math.ceil((eve.offsetY-Math.floor(y_down/fs)*fs)/fs))*fs);//Â°ó„Çä„Å§„Å∂„Åï„Çå„ÅüÂõõËßíÂΩ¢
          ctx.strokeRect(fx,fy,(Math.ceil((eve.offsetX-fx)/fs))*fs, (Math.ceil((eve.offsetY-fy)/fs))*fs);//Â°ó„Çä„Å§„Å∂„Åï„Çå„ÅüÂõõËßíÂΩ¢
          
          //ceil Âàá„Çä‰∏ä„Åí(Ë≤†„ÅÆÊï∞„Å´Ê≥®ÊÑè)
    
          ctx.font = '600 20px "GeoMathDotMono",serif';
          ctx.fillText(x_down+" "+y_down, 24, 40);
          ctx.fillText(Math.floor(x_down/fs)+" "+Math.floor(y_down/fs), 24,60 );
          ctx.fillText(Math.ceil((eve.offsetX-fx)/fs)+" "+Math.ceil((eve.offsetY-fy)/fs), 24, 80);

          sele_start_x = Math.floor(x_down/fs);
          sele_start_y = Math.floor(y_down/fs);
          sele_width = Math.ceil((eve.offsetX-fx)/fs);
          sele_height = Math.ceil((eve.offsetY-fy)/fs);

          ctx.fillText(sele_start_x+" "+sele_start_y, 24,100 );
          ctx.fillText(sele_width+" "+sele_height, 24, 120);
        }
    }
    }, false);

    document.querySelector('#ID_canvas01').addEventListener('mouseup', function(eve) {
      mouse_down_flag = false;
      //alert([...document.querySelector('#ID_main01').innerText]);
      //document.querySelector('#ID_main01').innerText=document.querySelector('#ID_main01').innerText.slice(0, sele_start_x) + code.repeat(sele_width) + document.querySelector('#ID_main01').innerText.slice(sele_start_x);
      //str_dot_table ="";
      
      for(let i=0;i<dot_table.length;i++){
        for(let j=0;j<dot_table[i].length;j++){
          if(i==sele_start_x && j== sele_start_y){
            dot_table[j+1][i+1] = code;            
            //str_dot_table  += dot_table[i][j];
          }
          //str_dot_table  += "\n";
        }
      }
      //console.log(str_dot_table);
      str_dot_table ="";
      for(let i=0;i<dot_table.length;i++){
        str_dot_table  += dot_table[i].join("")+"\n";
      }
      document.querySelector('#ID_main01').innerText = str_dot_table;

      ctx.clearRect(0, 0, ctx.canvas.clientWidth, ctx.canvas.clientHeight);
   }, false);

    document.querySelector('#ID_1F7E5').addEventListener('click', function(e) {code="üü•";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7E7').addEventListener('click', function(e) {code="üüß";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7E8').addEventListener('click', function(e) {code="üü®";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7E9').addEventListener('click', function(e) {code="üü©";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7E6').addEventListener('click', function(e) {code="üü¶";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7EA').addEventListener('click', function(e) {code="üü™";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F7EB').addEventListener('click', function(e) {code="üü´";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID__2B1B').addEventListener('click', function(e) {code="‚¨õ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID__2B1C').addEventListener('click', function(e) {code="‚¨ú";document.querySelector('#ID_mode01').innerHTML =code}, false);

    document.querySelector('#ID_1F3FB').addEventListener('click', function(e) {code="üèª";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F3FC').addEventListener('click', function(e) {code="üèº";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F3FD').addEventListener('click', function(e) {code="üèæ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F3FE').addEventListener('click', function(e) {code="üèæ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F3FF').addEventListener('click', function(e) {code="üèø";document.querySelector('#ID_mode01').innerHTML =code}, false);

    document.querySelector('#ID_1F332').addEventListener('click', function(e) {code="üå≤";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F333').addEventListener('click', function(e) {code="üå≥";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F333').addEventListener('click', function(e) {code="üå≥";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1FABE').addEventListener('click', function(e) {code="ü™æ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1FAB5').addEventListener('click', function(e) {code="ü™µ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F335').addEventListener('click', function(e) {code="üåµ";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID__26F0').addEventListener('click', function(e) {code="‚õ∞";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F3D4').addEventListener('click', function(e) {code="üèî";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1FAA8').addEventListener('click', function(e) {code="ü™®";document.querySelector('#ID_mode01').innerHTML =code}, false);
    document.querySelector('#ID_1F9F1').addEventListener('click', function(e) {code="üß±";document.querySelector('#ID_mode01').innerHTML =code}, false);


  }, true);

</script>
</head>
<body>
„É¢„Éº„ÉâÔºö<span id="ID_mode00"></span><br>
ÈÅ∏ÊäûÊñáÂ≠óÔºö<span id="ID_mode01"></span><br>
<span id="ID_selection">
<br>
<input type ="button" value ="„ÇØ„É™„ÉÉ„ÇØ">
<input type ="button" value ="Áü©ÂΩ¢ÈÅ∏Êäû">
<input type ="button" value ="ÁΩ´Á∑öË°®Á§∫"><br>
<input type ="button" value ="ÂÖ®Â°ó">
<input type ="button" value ="„É¨„Ç§„É§„Éº">
<input type ="button" value ="ÂÖÉ„Å´Êàª„Åô">
</span>

<span id="ID_span01">
<div class="button-group">
  <input type ="button" value ="üü•" id="ID_1F7E5">
  <input type ="button" value ="üüß" id="ID_1F7E7">
  <input type ="button" value ="üü®" id="ID_1F7E8">
  <input type ="button" value ="üü©" id="ID_1F7E9">
  <input type ="button" value ="üü¶" id="ID_1F7E6">
  <input type ="button" value ="üü™" id="ID_1F7EA">
  <input type ="button" value ="üü´" id="ID_1F7EB">
  <input type ="button" value ="‚¨õ" id="ID__2B1B">
  <input type ="button" value ="‚¨ú" id="ID__2B1C">
  <input type ="button" value ="‚ñë" id="">
  <input type ="button" value ="‚ñí" id="">
  <input type ="button" value ="‚ñì" id="">
</div>
<div class="button-group">
  <input type ="button" value ="üèª" id="ID_1F3FB">
  <input type ="button" value ="üèº" id="ID_1F3FC">
  <input type ="button" value ="üèæ" id="ID_1F3FD">
  <input type ="button" value ="üèæ" id="ID_1F3FE">
  <input type ="button" value ="üèø" id="ID_1F3FF">
  
  <input type ="button" value ="üî¥" id="">
  <input type ="button" value ="üü†" id="">
  <input type ="button" value ="üü°" id="">
  <input type ="button" value ="üü¢" id="">
</div>
<div class="button-group">
  <input type ="button" value ="üå≤" id="ID_1F332">
  <input type ="button" value ="üå≥" id="ID_1F333">
  <input type ="button" value ="ü™æ" id="ID_1FABE">
  <input type ="button" value ="ü™µ" id="ID_1FAB5">
  <input type ="button" value ="üåµ" id="ID_1F335">&nbsp;
  <input type ="button" value ="‚õ∞" id="ID__26F0">
  <input type ="button" value ="üèî" id="ID_1F3D4">
  <input type ="button" value ="ü™®" id="ID_1FAA8">
  <input type ="button" value ="üß±" id="ID_1F9F1">
</div>
<input type ="button" value ="üê∫" id=""><input type ="button" value ="üêñ">
<input type ="button" value ="üí£" id="">
<input type ="button" value ="üè¢" id=""><br>
<input type ="button" value ="‚≠±" id=""><input type ="button" value ="‚≠∞"><input type ="button" value ="‚≠≤"><input type ="button" value ="‚≠≥">
<input type ="button" value ="‚§í"><input type ="button" value ="‚§ì">
<input type ="button" value ="‚çè"><input type ="button" value ="‚çÖ"><input type ="button" value ="‚çÜ"><input type ="button" value ="‚çñ"><br>
<input type ="button" value ="‚á¶"><input type ="button" value ="‚áß"><input type ="button" value ="‚á®"><input type ="button" value ="‚á©"><input type ="button" value ="‚á≥"><input type ="button" value ="‚¨Ä"><input type ="button" value ="‚¨Å"><input type ="button" value ="‚¨Ç"><input type ="button" value ="‚¨É"><input type ="button" value ="‚¨Ñ"><br>
<input type ="button" value ="‚¨Ö"><input type ="button" value ="‚¨Ü"><input type ="button" value ="‚¨á"><input type ="button" value ="‚Æï"><input type ="button" value ="‚¨à"><input type ="button" value ="‚¨â"><input type ="button" value ="‚¨ä"><input type ="button" value ="‚¨ã"><input type ="button" value ="‚¨å"><input type ="button" value ="‚¨ç">
</span>

<canvas id="ID_canvas01" width="600" height="500">
  canvasË¶ÅÁ¥†„Çí„Çµ„Éù„Éº„Éà„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ
</canvas>
<pre id="ID_main01"></pre>
<body>
</html>